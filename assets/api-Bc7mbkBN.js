(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=o(i);fetch(i.href,s)}})();function f(e,t){if(!e||!e.getBoundingClientRect)return!1;const o=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;if(o.width===0&&o.height===0)return!1;switch(t){case"ani":return o.top<=n*.8&&o.bottom>=0;case"ani-center":return o.top<=n*.45&&o.bottom>=0;case"ani-bottom":return o.bottom<=n+100&&o.bottom>=n-200;default:return!1}}function y(){const e=document.querySelectorAll("[data-ani]");e&&e.length>0&&e.forEach(n=>{if(n&&!n.classList.contains("visible")){const i=n.getAttribute("data-ani");i&&i!==""?f(n,"ani")&&(n.classList.add(i),n.classList.add("animate")):f(n,"ani")&&n.classList.add("visible")}});const t=document.querySelectorAll("[data-ani-center]");t&&t.length>0&&t.forEach(n=>{if(n&&!n.classList.contains("visible-center")){const i=n.getAttribute("data-ani-center");i&&i!==""?f(n,"ani-center")&&(n.classList.add(i),n.classList.add("animate")):f(n,"ani-center")&&n.classList.add("visible-center")}});const o=document.querySelectorAll("[data-ani-bottom]");o&&o.length>0&&o.forEach(n=>{if(n&&!n.classList.contains("visible-bottom")){const i=n.getAttribute("data-ani-bottom");i&&i!==""?f(n,"ani-bottom")&&(n.classList.add(i),n.classList.add("animate")):f(n,"ani-bottom")&&n.classList.add("visible-bottom")}})}document.addEventListener("DOMContentLoaded",function(){y();let e=!1;function t(){y(),e=!1}function o(){e||(requestAnimationFrame(t),e=!0)}window.addEventListener&&(window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",o,{passive:!0}),window.addEventListener("orientationchange",o,{passive:!0})),document.addEventListener&&document.addEventListener("touchmove",o,{passive:!0})});window.addEventListener&&window.addEventListener("resize",function(){setTimeout(y,100)});const L=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);document.addEventListener("DOMContentLoaded",function(){L&&document.querySelectorAll(".faq-row").forEach(t=>{t.classList.add("safari-accordion")}),document.querySelectorAll(".faq-row__actions").forEach(t=>{t.addEventListener("click",function(){const o=this.nextElementSibling,n=o.classList.contains("open");document.querySelectorAll(".faq-row__body").forEach(i=>{i.style.maxHeight=null,i.classList.remove("open"),i.previousElementSibling.classList.remove("active")}),n||(L||(o.style.maxHeight=o.scrollHeight+"px"),o.classList.add("open"),this.classList.add("active"))})})});document.querySelectorAll(".form-block__item").forEach(e=>{const t=e.querySelector("input, textarea"),o=e.querySelector("label");t&&o&&(o.addEventListener("click",()=>{e.classList.add("active"),t.focus()}),t.addEventListener("focus",()=>{e.classList.add("active")}),t.addEventListener("blur",()=>{t.value.trim()===""?(e.classList.remove("active"),e.classList.remove("show")):e.classList.add("show"),t.type==="email"&&q(t,e)}),t.addEventListener("input",()=>{t.value.trim()!==""?(e.classList.add("active"),e.classList.add("show")):(e.classList.remove("active"),e.classList.remove("show")),t.type==="email"&&e.classList.remove("error")}),t.value.trim()!==""&&(e.classList.add("active"),e.classList.add("show")))});function q(e,t){e.value.trim()!==""&&(!e.checkValidity()||!b(e.value)?t.classList.add("error"):t.classList.remove("error"))}function b(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}document.addEventListener("submit",function(e){const t=e.target;if(t.classList.contains("your-form-class")||t.querySelector(".form-block__item")){const o=t.querySelectorAll('input[type="email"]');let n=!1;if(o.forEach(i=>{const s=i.closest(".form-block__item");s&&(!i.checkValidity()||!b(i.value)?(s.classList.add("error"),n=!0):s.classList.remove("error"))}),n){e.preventDefault();const i=t.querySelector(".form-block__item.error");i&&i.querySelector("input, textarea").focus()}}});const v=document.getElementById("inp2");v&&(v.addEventListener("input",function(){this.style.height="auto",this.value.trim()===""?this.style.height="100%":this.style.height=Math.min(this.scrollHeight,330)+"px"}),v.addEventListener("focus",function(){this.value.trim()!==""&&(this.style.height=Math.min(this.scrollHeight,330)+"px")}));document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".check-mark");e.length>0&&e.forEach(t=>{const o=t.querySelector("input");o&&o.addEventListener("change",function(){this.checked?t.classList.add("active"):t.classList.remove("active")})})});const A=document.querySelectorAll(".current-year");A.forEach(e=>{e.textContent=new Date().getFullYear()});const E=document.querySelectorAll(".signup-text-decor span");E&&E.forEach((e,t)=>{e.style.transitionDelay=`${t*80}ms`});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".mouse"),t=document.querySelector(".decor"),o=document.querySelectorAll(".block-shadow-inset");document.addEventListener("mousemove",function(n){const i=n.clientX,s=n.clientY;e.style.left=i+"px",e.style.top=s+"px",e.style.transform="translate(-50%, -50%)";const c=`circle(185px at ${i}px ${s}px)`;t.style.clipPath=c,t.style.opacity=1;const r=document.body.getBoundingClientRect(),d=i/r.width-.3,u=s/r.height-.3,a=-(d*10),l=-(u*10);o.forEach(m=>{m.style.boxShadow=`inset ${a.toFixed(2)}px ${l.toFixed(2)}px 20px 0 rgba(255, 255, 255, 1)`})}),o.forEach(n=>{n.style.boxShadow="inset 0 0 20px 0 #fff"})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".burger"),t=document.querySelectorAll(".menu__item"),o=document.querySelector(".overlap"),n=document.querySelector(".logo"),i=document.querySelector(".btn-header"),s=document.querySelector(".menu-mob"),c=document.querySelector(".menu-mob .menu__list"),r=document.body;function d(){if(r.classList.contains("menu-show")&&s&&c){const l=c.offsetHeight,m=s.offsetHeight,h=l+m;s.style.height=h+"px"}else s&&(s.style.height="")}function u(){r.classList.toggle("menu-show"),setTimeout(d,10)}function a(){r.classList.remove("menu-show"),setTimeout(d,10)}e&&e.addEventListener("click",u),t.forEach(l=>{l.addEventListener("click",a)}),o&&o.addEventListener("click",a),n&&n.addEventListener("click",a),i&&i.addEventListener("click",a),window.addEventListener("resize",function(){r.classList.contains("menu-show")&&d()})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".social-item-link");e&&e.addEventListener("click",function(t){t.preventDefault();const o=this.getAttribute("data-link")?.trim();if(o){navigator.clipboard.writeText(o).then(function(){console.log("Ссылка скопирована: "+o)}).catch(function(i){console.error("Ошибка копирования: ",i)});const n=this.closest(".popup");n&&(n.classList.add("link"),setTimeout(()=>{n.classList.remove("link")},3e3))}})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".cookie"),t=document.querySelector(".btn-cookie");function o(){return localStorage.getItem("cookiesAccepted")==="true"}function n(){e&&(o()?e.style.display="none":e.style.display="block")}function i(){localStorage.setItem("cookiesAccepted","true"),e&&(e.style.display="none"),console.log("Cookies accepted")}t&&t.addEventListener("click",i),n()});const x=0;function k(e){const t=document.querySelector(e);if(!t)return;const o=t.getBoundingClientRect().top+window.pageYOffset-x;window.scrollTo({top:o,behavior:"smooth"})}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const o=this.getAttribute("href");k(o)})});window.addEventListener("DOMContentLoaded",()=>{const e=window.location.hash;e&&setTimeout(()=>{k(e)},100)});document.addEventListener("DOMContentLoaded",function(){function e(c){typeof c.showModal=="function"?c.showModal():c.setAttribute("open","")}function t(c){typeof c.close=="function"?c.close():c.removeAttribute("open")}const o=document.querySelector("dialog.popup-lose"),n=o.querySelector('input[name="advertising_agreement"]');o.querySelector("button.close").addEventListener("click",()=>t(o));const i=document.querySelector("dialog.popup-thanks");i.querySelector("button.close").addEventListener("click",()=>t(i));const s=document.querySelector("form.form-block");s&&(s.addEventListener("submit",async function(c){c.preventDefault();const r=s.querySelector('input[name="email"]').value.trim(),d=s.querySelector('textarea[name="description"]').value.trim(),u=s.querySelector('input[name="agreement"]').checked,a=s.querySelector('input[name="public_offer"]').checked,l=s.querySelector('input[name="advertising_agreement"]').checked;if(!r||!u||!a){alert("Ошибка при отправке формы. Проверьте поля и попробуйте снова.");return}const m=1,h=new Date().toISOString(),S={email:r,description:d,form_version:m,consents:[{key:"privacy_policy",checked:u,checked_at:u?h:null},{key:"public_offer",checked:a,checked_at:a?h:null},{key:"marketing_optin",checked:l,checked_at:l?h:null}]};try{const p=await fetch("/api/v1/submissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!p.ok){const w=await p.json().catch(()=>({}));console.error("Ошибка отправки формы",w),alert("Ошибка при отправке формы. Проверьте поля и попробуйте снова.");return}const g=await p.json();localStorage.setItem("submissionId",g.id),console.log("Успех:",g),e(l?i:o),s.reset()}catch(p){console.error("Ошибка сети",p),alert("Ошибка сети, попробуйте позже.")}}),n.addEventListener("change",async c=>{if(!c.target.checked)return;const r=localStorage.getItem("submissionId");if(!r){console.warn("submissionId не найден в localStorage");return}(await fetch(`/api/v1/submissions/${r}/email`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({marketing_optin:!0})})).ok?(t(o),e(i)):alert("Ошибка при обновлении согласия"),c.target.checked=!1}))});
